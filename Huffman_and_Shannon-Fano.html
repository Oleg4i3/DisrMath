<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ü–æ–∫—Ä–æ–∫–æ–≤–∏–π –°–∏–º—É–ª—è—Ç–æ—Ä –•–∞—Ñ—Ñ–º–∞–Ω–∞ (v3)</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            line-height: 1.6;
            background-color: #f8f9fa;
            color: #333;
            max-width: 1200px;
            margin: 20px auto;
            padding: 20px;
        }
        h1, h2, h3 {
            color: #0056b3;
            border-bottom: 2px solid #e0e0e0;
            padding-bottom: 5px;
        }
        
        /* --- –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏ --- */
        #queueContainer, #treeContainer, .analysis, .theory-box {
            background-color: #fff;
            border: 1px solid #ddd;
            border-radius: 8px;
            padding: 15px;
            margin-top: 20px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
            box-sizing: border-box; /* –í–∞–∂–ª–∏–≤–æ –¥–ª—è 100% —à–∏—Ä–∏–Ω–∏ */
        }
        
        #queueContainer h3 {
            margin-top: 0;
        }

        #treeContainer {
            min-height: 350px;
            width: 100%;
            overflow-x: auto; /* –î–æ–¥–∞–Ω–æ –ø—Ä–æ –≤—Å—è–∫ –≤–∏–ø–∞–¥–æ–∫ */
        }

        .analysis {
            background-color: #fff8e1;
            border: 1px solid #ffecb3;
        }
        
        .theory-box {
            background-color: #f9f9f9;
            border: 1px solid #e5e5e5;
        }
        .theory-box h3 {
            color: #333;
            border-bottom: 1px solid #ccc;
        }

        /* --- –ï–ª–µ–º–µ–Ω—Ç–∏ –∫–µ—Ä—É–≤–∞–Ω–Ω—è --- */
        textarea {
            width: 100%;
            padding: 10px;
            font-size: 16px;
            border: 1px solid #ccc;
            border-radius: 5px;
            box-sizing: border-box;
        }
        button {
            background-color: #007bff;
            color: white;
            padding: 10px 15px;
            border: none;
            border-radius: 5px;
            font-size: 16px;
            cursor: pointer;
            margin: 5px;
        }
        button:hover {
            background-color: #0056b3;
        }
        button:disabled {
            background-color: #c0c0c0;
            cursor: not-allowed;
        }
        #stepControls {
            margin-top: 10px;
        }
        #stepDescription {
            background-color: #e6f7ff;
            border: 1px solid #b3e0ff;
            padding: 15px;
            border-radius: 5px;
            margin-top: 20px;
            font-size: 1.1em;
            font-weight: bold;
        }

        /* --- –í—ñ–∑—É–∞–ª—ñ–∑–∞—Ü—ñ—è —á–µ—Ä–≥–∏ --- */
        .queue-node {
            display: inline-block;
            padding: 5px 10px;
            background-color: #d6eaff;
            border: 1px solid #0056b3;
            border-radius: 4px;
            margin: 4px;
            font-family: "Courier New", Courier, monospace;
            font-weight: bold;
            white-space: pre;
        }
        .queue-node.internal {
            background-color: #fff0d6;
            border: 1px solid #b38b00;
        }

        /* --- –¢–∞–±–ª–∏—Ü—ñ --- */
        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 15px;
        }
        th, td {
            border: 1px solid #ddd;
            padding: 8px;
            text-align: left;
        }
        th {
            background-color: #f2f2f2;
        }

        /* --- –û–ù–û–í–õ–ï–ù–Ü –°–¢–ò–õ–Ü: –†–µ–∫—É—Ä—Å–∏–≤–Ω–µ –ó–ê–õ–ò–í–ê–ù–ù–Ø –≥—Ä—É–ø –®–µ–Ω–Ω–æ–Ω–∞-–§–∞–Ω–æ --- */
        
        /* CSS –ø—Ä–∞—Ü—é—î —Ç–∞–∫, —â–æ –æ—Å—Ç–∞–Ω–Ω—è_–æ–≥–æ–ª–æ—à–µ–Ω–∞_–≤–ª–∞—Å—Ç–∏–≤—ñ—Å—Ç—å_–¥–ª—è_–∫–ª–∞—Å—É –≤–∏–≥—Ä–∞—î.
           –û—Å–∫—ñ–ª—å–∫–∏ JS –¥–æ–¥–∞—î –≤—Å—ñ –∫–ª–∞—Å–∏ (–Ω–∞–ø—Ä. "sf-depth-0-left sf-depth-1-right"),
           –∫–æ–ª—ñ—Ä, –≤–∏–∑–Ω–∞—á–µ–Ω–∏–π –¥–ª—è 'sf-depth-1-right', '–ø–µ—Ä–µ–±'—î' –∫–æ–ª—ñ—Ä 'sf-depth-0-left',
           —â–æ –¥–∞—î –Ω–∞–º –±–∞–∂–∞–Ω–∏–π –µ—Ñ–µ–∫—Ç "–ø–µ—Ä–µ—Ñ–∞—Ä–±–æ–≤—É–≤–∞–Ω–Ω—è" –Ω–∞ –≥–ª–∏–±—à–∏—Ö —Ä—ñ–≤–Ω—è—Ö.
        */

        /* –†—ñ–≤–µ–Ω—å 0 (–ø–µ—Ä—à–∏–π –ø–æ–¥—ñ–ª): –±–∞–∑–æ–≤—ñ –∫–æ–ª—å–æ—Ä–∏ */
        .sf-depth-0-left { background-color: #e6f7ff; } /* –î—É–∂–µ —Å–≤—ñ—Ç–ª–æ-–±–ª–∞–∫–∏—Ç–Ω–∏–π */
        .sf-depth-0-right { background-color: #fffaf0; } /* –ö–≤—ñ—Ç–∫–æ–≤–æ-–±—ñ–ª–∏–π (–∂–æ–≤—Ç—É–≤–∞—Ç–∏–π) */

        /* –†—ñ–≤–µ–Ω—å 1: */
        .sf-depth-1-left { background-color: #d1ecff; }
        .sf-depth-1-right { background-color: #fff2d6; }

        /* –†—ñ–≤–µ–Ω—å 2: */
        .sf-depth-2-left { background-color: #b8e0ff; }
        .sf-depth-2-right { background-color: #ffeabf; }
        
        /* –†—ñ–≤–µ–Ω—å 3: */
        .sf-depth-3-left { background-color: #9fd3ff; }
        .sf-depth-3-right { background-color: #ffe1a8; }

        /* –†—ñ–≤–µ–Ω—å 4: (–Ω–∞ –≤–∏–ø–∞–¥–æ–∫ –≤–µ–ª–∏–∫–æ—ó –∫—ñ–ª—å–∫–æ—Å—Ç—ñ —Å–∏–º–≤–æ–ª—ñ–≤) */
        .sf-depth-4-left { background-color: #85c7ff; }
        .sf-depth-4-right { background-color: #ffd891; }

        /* –°—Ç–∏–ª—ñ–∑–∞—Ü—ñ—è –∫–æ–¥—É –®-–§, —â–æ–± –ø–æ–∫–∞–∑–∞—Ç–∏ –ø—Ä–∏–Ω–∞–ª–µ–∂–Ω—ñ—Å—Ç—å –¥–æ –ø–µ—Ä—à–æ—ó '0' —á–∏ '1' –≥—Ä—É–ø–∏ */
        /* –¶–µ –∑–∞–ª–∏—à–∞—î—Ç—å—Å—è –∫–æ—Ä–∏—Å–Ω–∏–º, —â–æ–± –±–∞—á–∏—Ç–∏ –∫–æ–¥–∏, —â–æ –ø–æ—á–∏–Ω–∞—é—Ç—å—Å—è –∑ '0' vs '1' */
        .sf-depth-0-left .sf-code {
            font-weight: bold;
            color: #0056b3; 
        }
        .sf-depth-0-right .sf-code {
            font-weight: bold;
            color: #c77700;
        }
        /* --- –ö—ñ–Ω–µ—Ü—å –æ–Ω–æ–≤–ª–µ–Ω–∏—Ö —Å—Ç–∏–ª—ñ–≤ --- */


        /* --- –°—Ç–∏–ª—ñ –¥–ª—è Mermaid.js --- */
        .mermaid .node rect {
            fill: #fff0d6 !important;
            stroke: #b38b00 !important;
        }
        .mermaid .node.leaf rect {
            fill: #d6eaff !important;
            stroke: #0056b3 !important;
        }
    </style>
</head>
<body>

    <h1>–ö–æ–¥ –•–∞—Ñ—Ñ–º–∞–Ω–∞</h1>

<div class="controls">
        <label for="inputText">–í–≤–µ–¥—ñ—Ç—å —Ñ—Ä–∞–∑—É –∞–±–æ –æ–±–µ—Ä—ñ—Ç—å –ø—Ä–∏–∫–ª–∞–¥:</label>
        
        <select id="presetSelect" onchange="document.getElementById('inputText').value = this.value" style="margin-bottom: 10px; padding: 5px; border-radius: 4px;">
            <option value="">-- –û–±–µ—Ä—ñ—Ç—å –≥–æ—Ç–æ–≤–∏–π –ø—Ä–∏–∫–ª–∞–¥ --</option>
            <option value="–º–∞–º–∞ –º–∞–ª–∞ —Å–∞–ª–∞ –Ω–∞ –∫–∞—Ä–∞–≤–∞–π">–º–∞–º–∞ –º–∞–ª–∞ —Å–∞–ª–∞ –Ω–∞ –∫–∞—Ä–∞–≤–∞–π</option>
            <option value="–º–æ–ª–æ–∫–æ –≤–æ–Ω–æ –¥–æ—Ä–æ–≥–µ">–º–æ–ª–æ–∫–æ –≤–æ–Ω–æ –¥–æ—Ä–æ–≥–µ</option>
            <option value="–ø–∏–ª–∏–≤ –ø–∏–ª–∏–ø –ª–∏–ø—É —Ç–∞ –ø–∏–≤–æ –Ω–µ –ø–∏–≤">–ø–∏–ª–∏–≤ –ø–∏–ª–∏–ø –ª–∏–ø—É —Ç–∞ –ø–∏–≤–æ –Ω–µ –ø–∏–≤</option>
            <option value="–±–∞—Ä–∞–Ω–∫–∞ –≤–ø–∞–ª–∞ –Ω–∞ –±–∞—Ä–∞–±–∞–Ω">–±–∞—Ä–∞–Ω–∫–∞ –≤–ø–∞–ª–∞ –Ω–∞ –±–∞—Ä–∞–±–∞–Ω</option>
  <option value="anna saw a banana in karaganda"> anna saw a banana in karaganda</option>
 <option value="–∞—Ç–∞–∫–∞ –∞—Ç–∞–º–∞–Ω–∞ –∑–∞—Å—Ç–∞–ª–∞ –∑–Ω–µ–Ω–∞—Ü—å–∫–∞"> –∞—Ç–∞–∫–∞ –∞—Ç–∞–º–∞–Ω–∞ –∑–∞—Å—Ç–∞–ª–∞ –∑–Ω–µ–Ω–∞—Ü—å–∫–∞</option>
        </select>
        <textarea id="inputText" rows="3">SANTA AT NASA</textarea>
        <button onclick="runSimulation()">–ü–æ–±—É–¥—É–≤–∞—Ç–∏ –°–∏–º—É–ª—è—Ü—ñ—é</button>
        
        <div id="stepControls" style="display: none;">
            <button id="btnBack" onclick="stepBackward()" disabled>‚¨ÖÔ∏è –ù–∞–∑–∞–¥</button>
            <button id="btnForward" onclick="stepForward()">–í–ø–µ—Ä–µ–¥ ‚û°Ô∏è</button>
        </div>
    </div>
    <div id="stepDescription">–í–≤–µ–¥—ñ—Ç—å —Ç–µ–∫—Å—Ç —Ç–∞ –Ω–∞—Ç–∏—Å–Ω—ñ—Ç—å "–ü–æ–±—É–¥—É–≤–∞—Ç–∏ –°–∏–º—É–ª—è—Ü—ñ—é".</div>

    <div id="simulationArea">
        <div id="queueContainer">
            <h3>–ü—Ä—ñ–æ—Ä–∏—Ç–µ—Ç–Ω–∞ —á–µ—Ä–≥–∞ (Min-Heap):</h3>
            <div id="queueDisplay"></div>
        </div>
        
        <div id="treeContainer">
            <h3>–í—ñ–∑—É–∞–ª—ñ–∑–∞—Ü—ñ—è –¥–µ—Ä–µ–≤–∞ (–õ—ñ—Å):</h3>
            <div id="treeDisplay">
                </div>
        </div>
    </div>

    <div id="results" class="analysis" style="display: none;">
        </div>

    <div id="theory" class="theory-box">
        <h2>üìñ –¢–µ–æ—Ä–µ—Ç–∏—á–Ω–∞ –¥–æ–≤—ñ–¥–∫–∞: –ö–æ–¥—É–≤–∞–Ω–Ω—è –•–∞—Ñ—Ñ–º–∞–Ω–∞</h2>
        
        <h3>–Ø–∫ –ø—Ä–∞—Ü—é—î –∞–ª–≥–æ—Ä–∏—Ç–º?</h3>
        <p>
            –ê–ª–≥–æ—Ä–∏—Ç–º –•–∞—Ñ—Ñ–º–∞–Ω–∞ ‚Äî —Ü–µ "–∂–∞–¥—ñ–±–Ω–∏–π" –∞–ª–≥–æ—Ä–∏—Ç–º, —è–∫–∏–π –±—É–¥—É—î –æ–ø—Ç–∏–º–∞–ª—å–Ω–µ –ø—Ä–µ—Ñ—ñ–∫—Å–Ω–µ
            –∫–æ–¥—É–≤–∞–Ω–Ω—è –¥–ª—è –Ω–∞–±–æ—Ä—É —Å–∏–º–≤–æ–ª—ñ–≤ –Ω–∞ –æ—Å–Ω–æ–≤—ñ —ó—Ö–Ω—ñ—Ö —á–∞—Å—Ç–æ—Ç (–π–º–æ–≤—ñ—Ä–Ω–æ—Å—Ç–µ–π –ø–æ—è–≤–∏).
            –ú–µ—Ç–∞ ‚Äî –Ω–∞–¥–∞—Ç–∏ –Ω–∞–π–∫–æ—Ä–æ—Ç—à—ñ –∫–æ–¥–∏ –Ω–∞–π—á–∞—Å—Ç—ñ—à–∏–º —Å–∏–º–≤–æ–ª–∞–º.
        </p>
        <ol>
            <li>
                <strong>–ü—ñ–¥—Ä–∞—Ö—É–Ω–æ–∫ —á–∞—Å—Ç–æ—Ç:</strong> –ê–Ω–∞–ª—ñ–∑—É—î—Ç—å—Å—è –≤—Ö—ñ–¥–Ω–∏–π —Ç–µ–∫—Å—Ç —ñ –ø—ñ–¥—Ä–∞—Ö–æ–≤—É—î—Ç—å—Å—è,
                —Å–∫—ñ–ª—å–∫–∏ —Ä–∞–∑—ñ–≤ –∑—É—Å—Ç—Ä—ñ—á–∞—î—Ç—å—Å—è –∫–æ–∂–µ–Ω —É–Ω—ñ–∫–∞–ª—å–Ω–∏–π —Å–∏–º–≤–æ–ª.
            </li>
            <li>
                <strong>–°—Ç–≤–æ—Ä–µ–Ω–Ω—è –ø—Ä—ñ–æ—Ä–∏—Ç–µ—Ç–Ω–æ—ó —á–µ—Ä–≥–∏:</strong> –î–ª—è –∫–æ–∂–Ω–æ–≥–æ —Å–∏–º–≤–æ–ª—É —Å—Ç–≤–æ—Ä—é—î—Ç—å—Å—è
                "–ª–∏—Å—Ç–æ–≤–∏–π" –≤—É–∑–æ–ª –¥–µ—Ä–µ–≤–∞. –í—É–∑–æ–ª –º—ñ—Å—Ç–∏—Ç—å —Å–∏–º–≤–æ–ª —ñ –π–æ–≥–æ —á–∞—Å—Ç–æ—Ç—É. –£—Å—ñ –≤—É–∑–ª–∏
                –ø–æ–º—ñ—â–∞—é—Ç—å—Å—è —É –ø—Ä—ñ–æ—Ä–∏—Ç–µ—Ç–Ω—É —á–µ—Ä–≥—É (min-heap), –¥–µ –≤—É–∑–ª–∏ –∑ –Ω–∞–π–º–µ–Ω—à–æ—é —á–∞—Å—Ç–æ—Ç–æ—é
                –º–∞—é—Ç—å –Ω–∞–π–≤–∏—â–∏–π –ø—Ä—ñ–æ—Ä–∏—Ç–µ—Ç.
            </li>
            <li>
                <strong>–ü–æ–±—É–¥–æ–≤–∞ –¥–µ—Ä–µ–≤–∞ (–∑–Ω–∏–∑—É –≤–≥–æ—Ä—É):</strong> –ü–æ–∫–∏ –≤ —á–µ—Ä–∑—ñ –∑–∞–ª–∏—à–∞—î—Ç—å—Å—è –±—ñ–ª—å—à–µ
                –æ–¥–Ω–æ–≥–æ –≤—É–∑–ª–∞, –≤–∏–∫–æ–Ω—É—é—Ç—å—Å—è –Ω–∞—Å—Ç—É–ø–Ω—ñ –¥—ñ—ó:
                <ul>
                    <li>–Ü–∑ —á–µ—Ä–≥–∏ –≤–∏—Ç—è–≥—É—é—Ç—å—Å—è –¥–≤–∞ –≤—É–∑–ª–∏ –∑ –Ω–∞–π–º–µ–Ω—à–∏–º–∏ —á–∞—Å—Ç–æ—Ç–∞–º–∏ (–Ω–∞–∑–≤–µ–º–æ —ó—Ö `A` —ñ `B`).</li>
                    <li>–°—Ç–≤–æ—Ä—é—î—Ç—å—Å—è –Ω–æ–≤–∏–π  –≤–Ω—É—Ç—Ä—ñ—à–Ω—ñ–π  –≤—É–∑–æ–ª (–±–∞—Ç—å–∫—ñ–≤—Å—å–∫–∏–π).</li>
                    <li>–ô–æ–≥–æ —á–∞—Å—Ç–æ—Ç–∞ –≤—Å—Ç–∞–Ω–æ–≤–ª—é—î—Ç—å—Å—è —è–∫ —Å—É–º–∞ —á–∞—Å—Ç–æ—Ç `A + B`.</li>
                    <li>`A` —Å—Ç–∞—î –ª—ñ–≤–∏–º –¥–æ—á—ñ—Ä–Ω—ñ–º –≤—É–∑–ª–æ–º, –∞ `B` ‚Äî –ø—Ä–∞–≤–∏–º.</li>
                    <li>–ù–æ–≤–∏–π –±–∞—Ç—å–∫—ñ–≤—Å—å–∫–∏–π –≤—É–∑–æ–ª –ø–æ–≤–µ—Ä—Ç–∞—î—Ç—å—Å—è –¥–æ –ø—Ä—ñ–æ—Ä–∏—Ç–µ—Ç–Ω–æ—ó —á–µ—Ä–≥–∏.</li>
                </ul>
            </li>
            <li>
                <strong>–ó–∞–≤–µ—Ä—à–µ–Ω–Ω—è:</strong> –ö–æ–ª–∏ –≤ —á–µ—Ä–∑—ñ –∑–∞–ª–∏—à–∞—î—Ç—å—Å—è –ª–∏—à–µ –æ–¥–∏–Ω –≤—É–∑–æ–ª ‚Äî —Ü–µ
                –∫–æ—Ä—ñ–Ω—å –ø–æ–≤–Ω–æ–≥–æ –¥–µ—Ä–µ–≤–∞ –•–∞—Ñ—Ñ–º–∞–Ω–∞.
            </li>
            <li>
                <strong>–ì–µ–Ω–µ—Ä–∞—Ü—ñ—è –∫–æ–¥—ñ–≤:</strong> –ö–æ–¥–∏ –≥–µ–Ω–µ—Ä—É—é—Ç—å—Å—è —à–ª—è—Ö–æ–º –æ–±—Ö–æ–¥—É –¥–µ—Ä–µ–≤–∞ –≤—ñ–¥
                –∫–æ—Ä–µ–Ω—è –¥–æ –∫–æ–∂–Ω–æ–≥–æ –ª–∏—Å—Ç–∞. –ü—Ä–∏ —Ä—É—Å—ñ –¥–æ –ª—ñ–≤–æ–≥–æ –¥–æ—á—ñ—Ä–Ω—å–æ–≥–æ –≤—É–∑–ª–∞ –¥–æ –∫–æ–¥—É –¥–æ–¥–∞—î—Ç—å—Å—è '0',
                –¥–æ –ø—Ä–∞–≤–æ–≥–æ ‚Äî '1'.
            </li>
        </ol>

        <h3>–î–µ –∑–∞—Å—Ç–æ—Å–æ–≤—É—î—Ç—å—Å—è?</h3>
        <p>
            –ö–æ–¥—É–≤–∞–Ω–Ω—è –•–∞—Ñ—Ñ–º–∞–Ω–∞ —î —Ñ—É–Ω–¥–∞–º–µ–Ω—Ç–∞–ª—å–Ω–æ—é —á–∞—Å—Ç–∏–Ω–æ—é –±–∞–≥–∞—Ç—å–æ—Ö –∞–ª–≥–æ—Ä–∏—Ç–º—ñ–≤ —Å—Ç–∏—Å–Ω–µ–Ω–Ω—è:
        </p>
        <ul>
            <li><strong>–ê—Ä—Ö—ñ–≤–∞—Ç–æ—Ä–∏:</strong> –¶–µ –∫–ª—é—á–æ–≤–∏–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –º–µ—Ç–æ–¥—É  Deflate  (—è–∫–∏–π –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è —É ZIP, GZIP, PKZIP).</li>
            <li><strong>–§–æ—Ä–º–∞—Ç–∏ –∑–æ–±—Ä–∞–∂–µ–Ω—å:</strong> –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è —É  PNG  (—è–∫ —á–∞—Å—Ç–∏–Ω–∞ Deflate) —Ç–∞  JPEG  (–¥–ª—è —Å—Ç–∏—Å–Ω–µ–Ω–Ω—è –∫–æ–µ—Ñ—ñ—Ü—ñ—î–Ω—Ç—ñ–≤ –ø—ñ—Å–ª—è DCT).</li>
            <li><strong>–§–æ—Ä–º–∞—Ç–∏ –∞—É–¥—ñ–æ/–≤—ñ–¥–µ–æ:</strong> –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞–≤—Å—è —É  MP3  –¥–ª—è —Å—Ç–∏—Å–Ω–µ–Ω–Ω—è –∫–≤–∞–Ω—Ç–æ–≤–∞–Ω–∏—Ö –¥–∞–Ω–∏—Ö.</li>
            <li><strong>–ú–µ—Ä–µ–∂–µ–≤—ñ –ø—Ä–æ—Ç–æ–∫–æ–ª–∏:</strong> –ó–∞—Å—Ç–æ—Å–æ–≤—É—î—Ç—å—Å—è –≤ –ø—Ä–æ—Ç–æ–∫–æ–ª–∞—Ö –¥–ª—è –∑–º–µ–Ω—à–µ–Ω–Ω—è –æ–±—Å—è–≥—É –ø–µ—Ä–µ–¥–∞–Ω–∏—Ö –¥–∞–Ω–∏—Ö, –Ω–∞–ø—Ä–∏–∫–ª–∞–¥, —É  HPACK  (—Å—Ç–∏—Å–Ω–µ–Ω–Ω—è –∑–∞–≥–æ–ª–æ–≤–∫—ñ–≤ HTTP/2).</li>
        </ul>

        <h3>–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∏</h3>
        <ul>
            <li>
                <strong>–ê—Ä–∏—Ñ–º–µ—Ç–∏—á–Ω–µ –∫–æ–¥—É–≤–∞–Ω–Ω—è:</strong>
                –ó–∞–∑–≤–∏—á–∞–π –¥–∞—î –∫—Ä–∞—â–∏–π —Å—Ç—É–ø—ñ–Ω—å —Å—Ç–∏—Å–Ω–µ–Ω–Ω—è, –æ—Å–∫—ñ–ª—å–∫–∏ –º–æ–∂–µ –ø—Ä–∏—Å–≤–æ—é–≤–∞—Ç–∏
                –¥—Ä–æ–±–æ–≤—É –∫—ñ–ª—å–∫—ñ—Å—Ç—å –±—ñ—Ç –æ–¥–Ω–æ–º—É —Å–∏–º–≤–æ–ª—É (–≤ —Å–µ—Ä–µ–¥–Ω—å–æ–º—É) —ñ –Ω–∞–±–ª–∏–∂–∞—î—Ç—å—Å—è –¥–æ
                –µ–Ω—Ç—Ä–æ–ø—ñ–π–Ω–æ—ó –º–µ–∂—ñ —â–µ –±–ª–∏–∂—á–µ. –û–¥–Ω–∞–∫ –≤–æ–Ω–æ –ø–æ–≤—ñ–ª—å–Ω—ñ—à–µ —ñ —Å–∫–ª–∞–¥–Ω—ñ—à–µ
                –≤ —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—ó.
            </li>
            <li>
                <strong>–ê–ª–≥–æ—Ä–∏—Ç–º–∏ Lempel-Ziv (LZ77, LZW):</strong>
                –¶–µ —Å–ª–æ–≤–Ω–∏–∫–æ–≤—ñ –º–µ—Ç–æ–¥–∏. –í–æ–Ω–∏ –ø—Ä–∞—Ü—é—é—Ç—å, –∑–Ω–∞—Ö–æ–¥—è—á–∏ –ø–æ–≤—Ç–æ—Ä—é–≤–∞–Ω—ñ –ø–æ—Å–ª—ñ–¥–æ–≤–Ω–æ—Å—Ç—ñ
                –¥–∞–Ω–∏—Ö —ñ –∑–∞–º—ñ–Ω—é—é—á–∏ —ó—Ö –ø–æ—Å–∏–ª–∞–Ω–Ω—è–º–∏ –Ω–∞ –ø–æ–ø–µ—Ä–µ–¥–Ω—ñ –≤—Ö–æ–¥–∂–µ–Ω–Ω—è.
                –í–æ–Ω–∏ –¥—É–∂–µ –µ—Ñ–µ–∫—Ç–∏–≤–Ω—ñ –¥–ª—è —Ç–µ–∫—Å—Ç—É —ñ —á–∞—Å—Ç–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—Ç—å—Å—è *—Ä–∞–∑–æ–º* –∑
                –∫–æ–¥—É–≤–∞–Ω–Ω—è–º –•–∞—Ñ—Ñ–º–∞–Ω–∞ (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, Deflate = LZ77 + –•–∞—Ñ—Ñ–º–∞–Ω).
            </li>
            <li>
                <strong>Asymmetric Numeral Systems (ANS):</strong>
                –°—É—á–∞—Å–Ω–∞ —Ç–µ—Ö–Ω—ñ–∫–∞, —è–∫–∞ –ø–æ—î–¥–Ω—É—î –≤–∏—Å–æ–∫–∏–π —Å—Ç—É–ø—ñ–Ω—å —Å—Ç–∏—Å–Ω–µ–Ω–Ω—è
                (–ø–æ—Ä—ñ–≤–Ω—è–Ω–Ω–∏–π –∑ –∞—Ä–∏—Ñ–º–µ—Ç–∏—á–Ω–∏–º –∫–æ–¥—É–≤–∞–Ω–Ω—è–º) –∑ –≤–∏—Å–æ–∫–æ—é —à–≤–∏–¥–∫—ñ—Å—Ç—é
                (–ø–æ—Ä—ñ–≤–Ω—è–Ω–Ω–æ—é –∑ –•–∞—Ñ—Ñ–º–∞–Ω–æ–º). –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è –≤ Zstandard (Facebook)
                —Ç–∞ LZFSE (Apple).
            </li>
        </ul>
    </div>

   <script src="https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.min.js"></script>
    <script>
        mermaid.initialize({ startOnLoad: true, theme: 'base' });

        // --- –ì–ª–æ–±–∞–ª—å–Ω—ñ –∑–º—ñ–Ω–Ω—ñ –¥–ª—è —Å—Ç–∞–Ω—É ---
        let allSteps = [];
        let currentStep = -1;
        
        // --- –ö–ª–∞—Å –¥–ª—è –≤—É–∑–ª–∞ ---
        let nodeIdCounter = 0;
        class Node {
            constructor(char, freq, left = null, right = null) {
                this.id = `n${nodeIdCounter++}`;
                this.char = char;
                this.freq = freq;
                this.left = left;
                this.right = right;
            }
        }

        // --- –û—Å–Ω–æ–≤–Ω–∞ —Ñ—É–Ω–∫—Ü—ñ—è: –ü–æ–±—É–¥–æ–≤–∞ —Å–∏–º—É–ª—è—Ü—ñ—ó ---
        function runSimulation() {
            const text = document.getElementById('inputText').value;
            if (text.length === 0) {
                alert("–ë—É–¥—å –ª–∞—Å–∫–∞, –≤–≤–µ–¥—ñ—Ç—å —Ç–µ–∫—Å—Ç.");
                return;
            }

            // –°–∫–∏–¥–∞–Ω–Ω—è —Å—Ç–∞–Ω—É
            allSteps = [];
            currentStep = -1;
            nodeIdCounter = 0;
            document.getElementById('results').style.display = 'none';
            document.getElementById('theory').style.display = 'block';

            // 1. –ß–∞—Å—Ç–æ—Ç–∏
            const freqMap = calculateFrequencies(text);
            
            // 2. –Ü–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è —á–µ—Ä–≥–∏
            let priorityQueue = [];
            for (const [char, freq] of Object.entries(freqMap)) {
                priorityQueue.push(new Node(char, freq));
            }
            const sortQueue = (q) => q.sort((a, b) => a.freq - b.freq);
            sortQueue(priorityQueue);

            // –ó–±–µ—Ä–µ–∂–µ–Ω–Ω—è –ø–æ—á–∞—Ç–∫–æ–≤–æ–≥–æ —Å—Ç–∞–Ω—É
            addStep("–ü–æ—á–∞—Ç–∫–æ–≤–∏–π —Å—Ç–∞–Ω: –ü—Ä—ñ–æ—Ä–∏—Ç–µ—Ç–Ω–∞ —á–µ—Ä–≥–∞ –∑–∞–ø–æ–≤–Ω–µ–Ω–∞.", [...priorityQueue]);

            // 3. –ü–æ–±—É–¥–æ–≤–∞ –¥–µ—Ä–µ–≤–∞
            while (priorityQueue.length > 1) {
                const left = priorityQueue.shift();
                const right = priorityQueue.shift();

                const parent = new Node(null, left.freq + right.freq, left, right);
                
                let desc = `–ö—Ä–æ–∫: –í–∑—è—Ç–æ ${formatNode(left).outerHTML} —Ç–∞ ${formatNode(right).outerHTML}.`;
                desc += ` –°—Ç–≤–æ—Ä–µ–Ω–æ –±–∞—Ç—å–∫—ñ–≤—Å—å–∫–∏–π –≤—É–∑–æ–ª ${formatNode(parent).outerHTML}.`;

                priorityQueue.push(parent);
                sortQueue(priorityQueue);
                
                desc += ` –ù–æ–≤–∏–π –≤—É–∑–æ–ª –¥–æ–¥–∞–Ω–æ –¥–æ —á–µ—Ä–≥–∏.`
                addStep(desc, [...priorityQueue]);
            }

            // 4. –§—ñ–Ω–∞–ª—å–Ω–∏–π —Å—Ç–∞–Ω
            const root = priorityQueue.length > 0 ? priorityQueue[0] : null;
            const codes = {};
            if (root) {
                 generateCodes(root, '', codes);
            }
           
            addStep("–î–µ—Ä–µ–≤–æ –•–∞—Ñ—Ñ–º–∞–Ω–∞ –ø–æ–≤–Ω—ñ—Å—Ç—é –ø–æ–±—É–¥–æ–≤–∞–Ω–æ.", [...priorityQueue], codes, freqMap, text.length);

            // 5. –ê–∫—Ç–∏–≤–∞—Ü—ñ—è —É–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è
            document.getElementById('stepControls').style.display = 'block';
            renderStep(0);
        }

        // --- –£–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è –∫—Ä–æ–∫–∞–º–∏ ---
        function stepForward() {
            if (currentStep < allSteps.length - 1) {
                renderStep(currentStep + 1);
            }
        }

        function stepBackward() {
            if (currentStep > 0) {
                renderStep(currentStep - 1);
            }
        }

        // --- –î–æ–¥–∞–≤–∞–Ω–Ω—è –∫—Ä–æ–∫—É –≤ —ñ—Å—Ç–æ—Ä—ñ—é ---
        function addStep(description, queueState, codes = null, freqMap = null, totalChars = 0) {
            allSteps.push({
                description,
                queueState,
                codes,
                freqMap,
                totalChars
            });
        }

        // --- –†–µ–Ω–¥–µ—Ä–∏–Ω–≥ –ø–æ—Ç–æ—á–Ω–æ–≥–æ –∫—Ä–æ–∫—É ---
        async function renderStep(index) {
            if (index < 0 || index >= allSteps.length) return;
            currentStep = index;
            const step = allSteps[currentStep];

            document.getElementById('stepDescription').innerHTML = `<b>–ö—Ä–æ–∫ ${currentStep + 1}/${allSteps.length}:</b> ${step.description}`;

            const queueDiv = document.getElementById('queueDisplay');
            queueDiv.innerHTML = '';
            step.queueState.forEach(node => {
                queueDiv.appendChild(formatNode(node));
            });

            const graphDef = generateMermaidGraph(step.queueState);
            const treeDiv = document.getElementById('treeDisplay');
            treeDiv.innerHTML = `<div class="mermaid">${graphDef}</div>`;
            
            try {
                await mermaid.run({ nodes: [treeDiv.firstElementChild] });
            } catch (e) {
                console.error("Mermaid render error:", e);
                treeDiv.innerHTML = "–ü–æ–º–∏–ª–∫–∞ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥—É –≥—Ä–∞—Ñ–∞.";
            }

            document.getElementById('btnBack').disabled = (currentStep === 0);
            document.getElementById('btnForward').disabled = (currentStep === allSteps.length - 1);

            const resultsDiv = document.getElementById('results');
            if (step.codes && step.totalChars > 0) {
                resultsDiv.innerHTML = renderAnalysis(step.codes, step.freqMap, step.totalChars);
                resultsDiv.style.display = 'block';
            } else {
                resultsDiv.style.display = 'none';
            }
        }

        // --- –ì–µ–Ω–µ—Ä–∞—Ü—ñ—è –≥—Ä–∞—Ñ–∞ Mermaid ---
        function generateMermaidGraph(queue) {
            let graph = "graph TD;\n";
            let declarations = new Set();
            let links = [];

            function traverse(node) {
                let label, nodeClass;
                if (node.char !== null) {
                    const charDisplay = node.char === ' ' ? "' '" : node.char;
                    label = `["${charDisplay}": ${node.freq}]`;
                    nodeClass = "leaf";
                } else {
                    label = `(${node.freq})`;
                    nodeClass = "internal";
                }
                
                declarations.add(`${node.id}${label}`);
                declarations.add(`class ${node.id} ${nodeClass};`);

                if (node.left) {
                    links.push(`${node.id} -- "0" --> ${node.left.id}`);
                    traverse(node.left);
                }
                if (node.right) {
                    links.push(`${node.id} -- "1" --> ${node.right.id}`);
                    traverse(node.right);
                }
            }
            
            queue.forEach(node => traverse(node));

            if (declarations.size === 0) {
                return "graph TD;\n  A[–ù–µ–º–∞—î –¥–∞–Ω–∏—Ö –¥–ª—è –≤—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è];";
            }

            return graph + Array.from(declarations).join(";\n") + ";\n" + links.join(";\n") + ";";
        }

        function calculateFrequencies(text) {
            const freqMap = {};
            for (const char of text) {
                freqMap[char] = (freqMap[char] || 0) + 1;
            }
            return freqMap;
        }

        function generateCodes(node, currentCode, codes) {
            if (node === null) return;
            if (node.left === null && node.right === null) {
                codes[node.char] = currentCode || '0';
                return;
            }
            generateCodes(node.left, currentCode + '0', codes);
            generateCodes(node.right, currentCode + '1', codes);
        }

        function formatNode(node) {
            const el = document.createElement('span');
            el.classList.add('queue-node');
            if (node.char === null) {
                el.classList.add('internal');
                el.textContent = `[${node.freq}]`;
            } else {
                const charDisplay = node.char === ' ' ? "' '" : node.char;
                el.textContent = `'${charDisplay}': ${node.freq}`;
            }
            return el;
        }
        
        // --- –§–£–ù–ö–¶–Ü–á: –†–û–ó–†–ê–•–£–ù–û–ö –ö–û–î–Ü–í –®–ï–ù–ù–û–ù–ê-–§–ê–ù–û ---

        function findSplitPoint(symbols) {
            if (symbols.length <= 1) return 0;

            const totalFreq = symbols.reduce((sum, s) => sum + s.freq, 0);
            let leftSum = 0;
            let minDiff = Infinity;
            let splitIndex = 0;

            for (let i = 0; i < symbols.length - 1; i++) {
                leftSum += symbols[i].freq;
                const rightSum = totalFreq - leftSum;
                const diff = Math.abs(leftSum - rightSum);

                if (diff < minDiff) { 
                    minDiff = diff;
                    splitIndex = i;
                }
            }
            return splitIndex; 
        }

        function shannonFanoRecursive(symbols, codes, currentCode) {
            if (symbols.length === 1) {
                codes[symbols[0].char] = currentCode || '0';
                return;
            }
            const splitIndex = findSplitPoint(symbols);
            const leftPartition = symbols.slice(0, splitIndex + 1);
            const rightPartition = symbols.slice(splitIndex + 1);

            if (leftPartition.length > 0) {
                shannonFanoRecursive(leftPartition, codes, currentCode + '0');
            }
            if (rightPartition.length > 0) {
                shannonFanoRecursive(rightPartition, codes, currentCode + '1');
            }
        }

        function calculateShannonFanoCodes(freqMap) {
            const codes = {};
            const sortedSymbols = Object.entries(freqMap)
                .map(([char, freq]) => ({ char, freq }))
                .sort((a, b) => b.freq - a.freq); 

            if (sortedSymbols.length === 0) {
                return codes;
            }

            shannonFanoRecursive(sortedSymbols, codes, '');
            return codes;
        }

        // --- –í–Ü–ó–£–ê–õ–Ü–ó–ê–¶–Ü–Ø –ö–õ–ê–°–Ü–í (–ö–æ–ª—å–æ—Ä–∏ –≥—Ä—É–ø) ---
        function assignSplitClasses(symbols, startIndex, rowClasses, depth) {
            if (symbols.length <= 1) {
                return;
            }

            const splitIndex = findSplitPoint(symbols);
            const leftGroup = symbols.slice(0, splitIndex + 1);
            const rightGroup = symbols.slice(splitIndex + 1);

            const leftClass = 'sf-depth-' + depth + '-left';
            const rightClass = 'sf-depth-' + depth + '-right';

            for (let i = 0; i < leftGroup.length; i++) {
                rowClasses[startIndex + i] += ` ${leftClass}`;
            }
            
            for (let i = 0; i < rightGroup.length; i++) {
                rowClasses[startIndex + leftGroup.length + i] += ` ${rightClass}`;
            }

            assignSplitClasses(leftGroup, startIndex, rowClasses, depth + 1);
            assignSplitClasses(rightGroup, startIndex + leftGroup.length, rowClasses, depth + 1);
        }


        // --- –û–ù–û–í–õ–ï–ù–ê –§–£–ù–ö–¶–Ü–Ø: –†–µ–Ω–¥–µ—Ä–∏–Ω–≥ —Ñ—ñ–Ω–∞–ª—å–Ω–æ–≥–æ –∞–Ω–∞–ª—ñ–∑—É (–õ–ï–ö–°–ò–ö–û–ì–†–ê–§–Ü–ß–ù–ï –°–û–†–¢–£–í–ê–ù–ù–Ø) ---
        function renderAnalysis(huffmanCodes, freqMap, totalChars) {
            
            // 1. –†–æ–∑—Ä–∞—Ö—É–Ω–æ–∫ –®–µ–Ω–Ω–æ–Ω–∞-–§–∞–Ω–æ
            const shannonFanoCodes = calculateShannonFanoCodes(freqMap);

            let html = '<h2>–§—ñ–Ω–∞–ª—å–Ω–∏–π –ê–Ω–∞–ª—ñ–∑</h2>';
            
            // 2. –û—Ç—Ä–∏–º–∞–Ω–Ω—è –¥–∞–Ω–∏—Ö –≤—ñ–¥—Å–æ—Ä—Ç–æ–≤–∞–Ω–∏—Ö –∑–∞ –ß–ê–°–¢–û–¢–û–Æ (–¥–ª—è —Ä–æ–∑—Ä–∞—Ö—É–Ω–∫—É –∫–æ–ª—å–æ—Ä—ñ–≤)
            // –¶–µ –≤–∞–∂–ª–∏–≤–æ: –∫–æ–ª—å–æ—Ä–∏ –ø—Ä–∏–∑–Ω–∞—á–∞—é—Ç—å—Å—è –∑–∞ —á–∞—Å—Ç–æ—Ç–Ω–∏–º –ø–æ–¥—ñ–ª–æ–º
            const sortedByFreq = Object.entries(freqMap)
                .sort(([, freqA], [, freqB]) => freqB - freqA);

            // 3. –†–æ–∑—Ä–∞—Ö—É–Ω–æ–∫ –∫–æ–ª—å–æ—Ä—ñ–≤
            const sfSymbolObjects = sortedByFreq.map(([char, freq]) => ({ char, freq }));
            let rowClasses = new Array(sortedByFreq.length).fill('');
            
            if (sfSymbolObjects.length > 1) {
                 assignSplitClasses(sfSymbolObjects, 0, rowClasses, 0);
            }
            
            // 4. –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –º–∞—Å–∏–≤—É –æ–±'—î–∫—Ç—ñ–≤
            let tableData = sortedByFreq.map(([char, freq], index) => {
                const huffmanCode = huffmanCodes[char] || 'N/A';
                const shannonCode = shannonFanoCodes[char] || 'N/A';
                return {
                    char: char === ' ' ? "' '" : char,
                    freq: freq,
                    huffmanCode: huffmanCode,
                    huffmanLen: huffmanCode.length,
                    shannonCode: shannonCode,
                    shannonLen: shannonCode.length,
                    rowClass: rowClasses[index] 
                };
            });

            // 5. --- –ó–ú–Ü–ù–ê: –õ–ï–ö–°–ò–ö–û–ì–†–ê–§–Ü–ß–ù–ï –°–û–†–¢–£–í–ê–ù–ù–Ø ---
            // –°–æ—Ä—Ç—É—î–º–æ –∑–∞ –∫–æ–¥–æ–º –®–µ–Ω–Ω–æ–Ω–∞-–§–∞–Ω–æ —è–∫ –∑–∞ —Å—Ç—Ä–æ–∫–æ—é (0, 00, 01, 1, 10...)
            tableData.sort((a, b) => {
                if (a.shannonCode < b.shannonCode) return -1;
                if (a.shannonCode > b.shannonCode) return 1;
                return 0;
            });

            // 6. –†–µ–Ω–¥–µ—Ä–∏–Ω–≥ —Ç–∞–±–ª–∏—Ü—ñ
            html += renderTable(
                ['–°–∏–º–≤–æ–ª', '–ß–∞—Å—Ç–æ—Ç–∞', '–ö–æ–¥ –•–∞—Ñ—Ñ–º–∞–Ω–∞', '–î–æ–≤–∂. (H)', '–ö–æ–¥ –®–µ–Ω–Ω–æ–Ω–∞-–§–∞–Ω–æ', '–î–æ–≤–∂. (S-F)'],
                tableData.map(row => [
                    row.char,
                    row.freq,
                    row.huffmanCode,
                    row.huffmanLen,
                    `<span class="sf-code">${row.shannonCode}</span>`,
                    row.shannonLen
                ]),
                tableData.map(row => row.rowClass) // –ü–µ—Ä–µ–¥–∞—î–º–æ –∫–æ–ª—å–æ—Ä–∏ (–≤–æ–Ω–∏ "–ø—Ä–∏–ª–∏–ø–ª–∏" –¥–æ —Ä—è–¥–∫—ñ–≤ —É tableData)
            );

            // --- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ ---
            const uniqueChars = Object.keys(freqMap).length;
            const fixedBitsPerChar = (uniqueChars > 1) ? Math.ceil(Math.log2(uniqueChars)) : 1;
            const originalBits = totalChars * fixedBitsPerChar;

            let entropy = 0;
            let huffmanAvgLength = 0; 
            let huffmanBits = 0;
            let shannonAvgLength = 0;
            let shannonBits = 0;

            for (const [char, freq] of Object.entries(freqMap)) {
                const probability = freq / totalChars;
                entropy -= probability * Math.log2(probability);

                const hCodeLen = huffmanCodes[char].length;
                huffmanAvgLength += probability * hCodeLen;
                huffmanBits += freq * hCodeLen;

                const sCodeLen = shannonFanoCodes[char] ? shannonFanoCodes[char].length : 0;
                if (sCodeLen > 0) {
                    shannonAvgLength += probability * sCodeLen;
                    shannonBits += freq * sCodeLen;
                }
            }

            if (uniqueChars === 1) entropy = 0;

            const huffmanEfficiency = (entropy > 0 && huffmanAvgLength > 0) ? (entropy / huffmanAvgLength) : 1;
            const huffmanRedundancy = huffmanAvgLength - entropy;
            const shannonEfficiency = (entropy > 0 && shannonAvgLength > 0) ? (entropy / shannonAvgLength) : 1;
            const shannonRedundancy = shannonAvgLength - entropy;

            html += `
                <h3 style="margin-top: 20px;">–ê–Ω–∞–ª—ñ–∑ –µ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—ñ</h3>
                <ul>
                    <li><b>–ö—ñ–ª—å–∫—ñ—Å—Ç—å —É–Ω—ñ–∫–∞–ª—å–Ω–∏—Ö —Å–∏–º–≤–æ–ª—ñ–≤:</b> ${uniqueChars}</li>
                    <li><b>–ó–∞–≥–∞–ª—å–Ω–∞ –∫—ñ–ª—å–∫—ñ—Å—Ç—å —Å–∏–º–≤–æ–ª—ñ–≤:</b> ${totalChars}</li>
                    <li style="margin-top: 10px;"><b>–†—ñ–≤–Ω–æ–º—ñ—Ä–Ω–∏–π –∫–æ–¥:</b> ${originalBits} –±—ñ—Ç (${fixedBitsPerChar} –±—ñ—Ç/—Å–∏–º–≤–æ–ª)</li>
                    <li style="margin-top: 10px;"><b>–ö–æ–¥ –•–∞—Ñ—Ñ–º–∞–Ω–∞ (–í—Å—å–æ–≥–æ):</b> ${huffmanBits} –±—ñ—Ç</li>
                    <li><b>–ö–æ–¥ –®–µ–Ω–Ω–æ–Ω–∞-–§–∞–Ω–æ (–í—Å—å–æ–≥–æ):</b> ${shannonBits} –±—ñ—Ç</li>
                    <li style="margin-top: 10px;"><b>–ï–Ω—Ç—Ä–æ–ø—ñ—è (H):</b> ${entropy.toFixed(4)} –±—ñ—Ç/—Å–∏–º–≤–æ–ª</li>
                    <li style="margin-top: 10px;"><b>–°–µ—Ä–µ–¥–Ω—è –¥–æ–≤–∂–∏–Ω–∞ (–•–∞—Ñ—Ñ–º–∞–Ω):</b> ${huffmanAvgLength.toFixed(4)} –±—ñ—Ç/—Å–∏–º–≤–æ–ª</li>
                    <li><b>–ï—Ñ–µ–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å (–•–∞—Ñ—Ñ–º–∞–Ω):</b> ${(huffmanEfficiency * 100).toFixed(2)}%</li>
                    <li style="margin-top: 10px;"><b>–°–µ—Ä–µ–¥–Ω—è –¥–æ–≤–∂–∏–Ω–∞ (–®–µ–Ω–Ω–æ–Ω-–§–∞–Ω–æ):</b> ${shannonAvgLength.toFixed(4)} –±—ñ—Ç/—Å–∏–º–≤–æ–ª</li>
                    <li><b>–ï—Ñ–µ–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å (–®–µ–Ω–Ω–æ–Ω-–§–∞–Ω–æ):</b> ${(shannonEfficiency * 100).toFixed(2)}%</li>
                </ul>
            `;
            
            let conclusion = `<p><b>–í–∏—Å–Ω–æ–≤–æ–∫:</b> `;
            if (huffmanAvgLength < shannonAvgLength) {
                conclusion += `–•–∞—Ñ—Ñ–º–∞–Ω –ø–µ—Ä–µ–º—ñ–≥! –í—ñ–Ω –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–≤ –Ω–∞ <b>${shannonBits - huffmanBits} –±—ñ—Ç</b> –º–µ–Ω—à–µ.`;
            } else if (huffmanAvgLength === shannonAvgLength) {
                conclusion += `–ù—ñ—á–∏—è. –û–±–∏–¥–≤–∞ –º–µ—Ç–æ–¥–∏ –ø–æ–∫–∞–∑–∞–ª–∏ –æ–¥–Ω–∞–∫–æ–≤–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç.`;
            } else {
                conclusion += `–®–µ–Ω–Ω–æ–Ω-–§–∞–Ω–æ –ø–µ—Ä–µ–º—ñ–≥ (—Ü–µ –º–∞–ª–æ–π–º–æ–≤—ñ—Ä–Ω–æ –¥–ª—è –∫–æ—Ä–µ–∫—Ç–Ω–æ–≥–æ –•–∞—Ñ—Ñ–º–∞–Ω–∞).`;
            }
            conclusion += `</p>`;
            
            html += conclusion;

            return html;
        }

        function renderTable(headers, rows, rowClasses = []) {
            let html = '<table><thead><tr>';
            headers.forEach(h => html += `<th>${h}</th>`);
            html += '</tr></thead><tbody>';
            rows.forEach((row, i) => {
                const rowClass = rowClasses[i] || ''; 
                html += `<tr class="${rowClass}">`; 
                row.forEach(cell => html += `<td>${cell}</td>`);
                html += '</tr>';
            });
            html += '</tbody></table>';
            return html;
        }

    </script>
</body>
</html>